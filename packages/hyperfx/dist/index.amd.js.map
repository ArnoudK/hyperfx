{"version":3,"file":"index.amd.js","sources":["../src/elem/elem.ts","../src/pages/navigate.ts","../src/elem/text.ts","../src/elem/headings.ts","../src/elem/style.ts","../src/elem/img.ts","../src/elem/input.ts","../src/elem/head.ts","../src/elem/table.ts","../src/elem/semantic.ts","../src/reactive/morphing.ts","../src/reactive/component.ts","../src/reactive/event.ts","../src/pages/register.ts","../../../node_modules/.pnpm/@rollup+plugin-typescript@11.1.6_rollup@4.18.1_tslib@2.6.3_typescript@5.5.3/node_modules/tslib/tslib.es6.js","../src/fetcher.ts","../src/index.ts"],"sourcesContent":["import type { GlobalAttr, HtmlAtrribute } from \"./attr\";\n\ntype BodyChild = HTMLDivElement | HTMLSpanElement | HTMLParagraphElement;\n\nexport const Div = (attributes: GlobalAttr, ...children: BodyChild[]) =>\n  createE(\"div\", attributes, children);\n\n/** Render text (the text content inside a tag): */\nexport const t = (t: string) => document.createTextNode(t);\n\nexport const RenderToBody = (el: HTMLElement) => document.body.appendChild(el);\n\nexport function addAttr(el: Element, attributes: object) {\n  const attrs = Object.keys(attributes);\n  for (const attr of attrs) {\n    el.setAttribute(attr, (attributes as any)[attr]);\n  }\n}\n\nexport function addChildren(e: Element, children: (Element | Text)[]) {\n  for (const c of children) {\n    e.appendChild(c);\n  }\n}\n\nexport function createS<K extends keyof HTMLElementTagNameMap>(\n  name: K,\n  attributes: object,\n) {\n  const el = document.createElement(name);\n  const attrs = Object.keys(attributes);\n  for (const attr of attrs) {\n    el.setAttribute(attr, (attributes as any)[attr]);\n  }\n  return el;\n}\n\nexport function createE<K extends keyof HTMLElementTagNameMap>(\n  name: K,\n  attributes: object,\n  children: (Text | Element)[],\n) {\n  const el = document.createElement(name);\n  const attrs = Object.keys(attributes);\n  for (const attr of attrs) {\n    el.setAttribute(attr, (attributes as any)[attr]);\n  }\n  for (const c of children) {\n    el.appendChild(c);\n  }\n  return el;\n}\n","/**\n * Navigate to a url by pushing it and popstate this allows for soft navigation using HyperFX\n * The URL must be registered in the PageRegister!!!\n */\nexport function navigateTo(href: string) {\n  history.pushState({}, \"\", href);\n  window.dispatchEvent(new Event(\"popstate\"));\n}\n","import { navigateTo } from \"../pages/navigate\";\nimport type { GlobalAttr, targetValues } from \"./attr\";\nimport { addAttr, addChildren, createE, t } from \"./elem\";\n/**\n    * this file is for Elements with phrasing content that should have text as children\n    * Phrasing context:  https://developer.mozilla.org/en-US/docs/Web/HTML/Content_categories#phrasing_content\n    But only the ones that are not just semantic divs\n    */\n\nexport function Span(attributes: GlobalAttr, text: string) {\n  const res = document.createElement(\"span\");\n  addAttr(res, attributes);\n  res.appendChild(t(text));\n  return res;\n}\ntype TextChild = Text | HTMLElement;\n\nexport const P = (attributes: GlobalAttr, ...children: TextChild[]) =>\n  createE(\"p\", attributes, children);\n\nexport const Abbr = (attributes: GlobalAttr, ...children: Text[]) =>\n  createE(\"abbr\", attributes, children);\n\ntype anchorAttr = Partial<GlobalAttr> & {\n  href: string;\n  target?: targetValues;\n  download?: \"download\";\n  filename?: string;\n  hreflang?: string;\n  ping?: string;\n  referrerpolicy?:\n    | \"no-referrer\"\n    | \"no-referrer-when-downgrade\"\n    | \"origin\"\n    | \"origin-when-cross-origin\"\n    | \"same-origin\"\n    | \"strict-origin\"\n    | \"strict-origin-when-cross-origin\"\n    | \"unsafe-url\";\n  rel?: string;\n};\n\nexport function A(attributes: anchorAttr, ...children: TextChild[]) {\n  const res = createE(\"a\", attributes, children);\n  if (attributes.href[0] == \"/\") {\n    res.addEventListener(\"click\", (ev) => {\n      navigateTo((ev.target as HTMLAnchorElement).href);\n      ev.preventDefault();\n      return false;\n    });\n  }\n  return res;\n}\n\nexport const B = (attributes: GlobalAttr, ...children: Text[]) =>\n  createE(\"b\", attributes, children);\n\nexport const Bdi = (attributes: GlobalAttr, ...children: Text[]) =>\n  createE(\"bdi\", attributes, children);\n\nexport const Bdo = (attributes: GlobalAttr, ...children: Text[]) =>\n  createE(\"bdo\", attributes, children);\n\nexport const I = (attributes: GlobalAttr, ...children: Text[]) =>\n  createE(\"i\", attributes, children);\n\nexport const Cite = (attributes: GlobalAttr, ...children: TextChild[]) =>\n  createE(\"cite\", attributes, children);\n","import type { GlobalAttr } from \"./attr\";\nimport { addAttr, addChildren, createE } from \"./elem\";\n\ntype heads = \"h1\" | \"h2\" | \"h3\" | \"h4\" | \"h5\" | \"h6\";\n\nconst Head = (t: heads, attributes: GlobalAttr, ...children: Text[]) =>\n  createE(t, attributes, children);\n\nexport const H1 = (attributes: GlobalAttr, ...children: Text[]) =>\n  Head(\"h1\", attributes, ...children);\n\nexport const H2 = (attributes: GlobalAttr, ...children: Text[]) =>\n  Head(\"h2\", attributes, ...children);\n\nexport const H3 = (attributes: GlobalAttr, ...children: Text[]) =>\n  Head(\"h3\", attributes, ...children);\n\nexport const H4 = (attributes: GlobalAttr, ...children: Text[]) =>\n  Head(\"h4\", attributes, ...children);\n\nexport const H5 = (attributes: GlobalAttr, ...children: Text[]) =>\n  Head(\"h5\", attributes, ...children);\n\nexport const H6 = (attributes: GlobalAttr, ...children: Text[]) =>\n  Head(\"h6\", attributes, ...children);\n","import type { GlobalAttr } from \"./attr\";\nimport { createS } from \"./elem\";\n\nexport const Br = (attributes: GlobalAttr) => createS(\"br\", attributes);\n\nexport const Hr = (attributes: GlobalAttr) => createS(\"hr\", attributes);\n","import type { GlobalAttr } from \"./attr\";\nimport { addAttr, createS } from \"./elem\";\n\ntype requiredImgAttr = { src: string };\ntype optionImgAttr = {\n  alt: string;\n  attributionsrc: string;\n  crossorigin: \"anonymous\" | \"use-credentials\";\n  decoding: \"sync\" | \"async\" | \"auto\";\n  elementtiming: string;\n  fetchpriority: \"high\" | \"low\" | \"auto\";\n  height: string;\n  width: string;\n  loading: \"eager\" | \"lazy\";\n  referrerpolicy:\n    | \"no-referrer\"\n    | \"no-referrer-when-downgrade\"\n    | \"origin\"\n    | \"origin-when-cross-origin\"\n    | \"same-origin\"\n    | \"strict-origin\"\n    | \"strict-origin-when-cross-origin\"\n    | \"unsafe-url\";\n  sizes: string;\n  srcset: string;\n};\n\ntype imageAttr = requiredImgAttr & GlobalAttr & Partial<optionImgAttr>;\n\nexport const Img = (attrs: imageAttr) => createS(\"img\", attrs);\n","import type { GlobalAttr, targetValues } from \"./attr\";\nimport { addAttr, addChildren, createE, createS } from \"./elem\";\n\ntype inputRequired = {\n  type:\n    | \"button\"\n    | \"checkbox\"\n    | \"color\"\n    | \"date\"\n    | \"datetime-local\"\n    | \"email\"\n    | \"file\"\n    | \"hidden\"\n    | \"image\"\n    | \"month\"\n    | \"password\"\n    | \"radio\"\n    | \"range\"\n    | \"reset\"\n    | \"search\"\n    | \"submit\"\n    | \"tel\"\n    | \"text\"\n    | \"time\"\n    | \"url\"\n    | \"week\";\n  /**   @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input#name\n        '_charset_' combined with hidden will set the value to the 'user-agent'  \n        'isindex' is not allowed as name\n         */\n  name: string | \"_charset_\";\n  id: string;\n};\n\nconst inputTypes = [\n  \"button\",\n  \"checkbox\",\n  \"color\",\n  \"date\",\n  \"datetime-local\",\n  \"email\",\n  \"file\",\n  \"hidden\",\n  \"image\",\n  \"month\",\n  \"password\",\n  \"radio\",\n  \"range\",\n  \"reset\",\n  \"search\",\n  \"submit\",\n  \"tel\",\n  \"text\",\n  \"time\",\n  \"url\",\n  \"week\",\n] as const;\ntype inputType = (typeof inputTypes)[number];\n\ntype SteppableAttr = { value: string; max: string; min: string; step: string };\ntype LengthAble = { value: string; maxlength: string; minlength: string };\ntype InputAttr<inputType> = {\n  id: string;\n  name: string;\n  /**  Tell the browser the input has a valid value before it can be submitted.\n    NOT VALID ON: hidden, range, color, and buttons.\n    @TODO might be fixed in later version  */\n  required?: \"required\";\n} & GlobalAttr &\n  (inputType extends \"button\"\n    ? { type: \"button\"; value: string }\n    : inputType extends \"checkbox\"\n      ? {\n          type: \"checkbox\";\n          value: string;\n          checked?: \"checked\";\n        }\n      : inputType extends \"color\"\n        ? { type: \"color\"; value?: string }\n        : inputType extends \"date\"\n          ? {\n              type: \"date\";\n            } & Partial<SteppableAttr>\n          : inputType extends \"datetime-local\"\n            ? {\n                type: \"datetime-local\";\n              } & Partial<SteppableAttr>\n            : inputType extends \"email\"\n              ? {\n                  type: \"email\";\n                  multiple?: \"multiple\";\n                  pattern?: string;\n                  placeholder?: string;\n                  readonly?: \"readonly\";\n                  size?: string;\n                  list?: string;\n                } & Partial<LengthAble>\n              : inputType extends \"file\"\n                ? {\n                    type: \"file\";\n                    value: \"\";\n                    accept?: \"string\";\n                    capture?: \"user\" | \"environment\";\n                    multiple?: \"multiple\";\n                    webkitdirectory?: \"webkitdirectory\";\n                  }\n                : inputType extends \"hidden\"\n                  ? {\n                      type: \"hidden\";\n                      // if the value is '_charset_' it will set the user-agent as value\n                      value: string | \"_charset_\";\n                    }\n                  : inputType extends \"image\"\n                    ? {\n                        type: \"image\";\n                        src?: string;\n                        alt?: string;\n                        formaction?: string;\n                        formenctype?:\n                          | \"application/x-www-form-urlencoded\"\n                          | \"multipart/form-data\"\n                          | \"text/plain\";\n                        formmethod?: \"get\" | \"post\" | \"dialog\";\n                        formnovalidate?: \"formnovalidate\";\n                        formtarget: targetValues;\n                      }\n                    : inputType extends \"month\"\n                      ? {\n                          type: \"month\";\n                          readonly?: \"readonly\";\n                          list?: string;\n                        } & Partial<SteppableAttr>\n                      : inputType extends \"nubmer\"\n                        ? {\n                            type: \"number\";\n                            list?: string;\n                            placeholder?: string;\n                            readonly?: \"readonly\";\n                          } & Partial<SteppableAttr>\n                        : inputType extends \"password\"\n                          ? {\n                              type: \"password\";\n                              pattern?: string;\n                              /* please use minlength and maxlength in CSS instead*/\n                              size?: string;\n                              readonly?: \"readonly\";\n                              placeholder?: string;\n                              autocomplete?:\n                                | \"on\"\n                                | \"off\"\n                                | \"current-password\"\n                                | \"new-password\";\n                            } & Partial<LengthAble>\n                          : inputType extends \"radio\"\n                            ? {\n                                type: \"radio\";\n                                checked?: \"checked\";\n                              }\n                            : inputType extends \"range\"\n                              ? {\n                                  type: \"range\";\n                                  list: string;\n                                  orient?: \"horizontal\" | \"vertical\";\n                                } & SteppableAttr\n                              : inputType extends \"reset\"\n                                ? {\n                                    type: \"reset\";\n                                  }\n                                : inputType extends \"search\"\n                                  ? {\n                                      type: \"search\";\n                                      value?: string;\n                                      list: string;\n                                      pattern: string;\n                                      placeholder: string;\n                                      readonly: \"readonly\";\n                                      size: string;\n                                      autocorrect?: \"on\" | \"off\";\n                                      incremental?: \"incremental\";\n                                      results?: string;\n                                    } & Partial<LengthAble>\n                                  : inputType extends \"submit\"\n                                    ? {\n                                        type: \"submit\";\n                                        value: string;\n                                        disabled?: \"disabled\";\n                                        formenctype?:\n                                          | \"application/x-www-form-urlencoded\"\n                                          | \"multipart/form-data\"\n                                          | \"text/plain\";\n                                        formmethod?: \"get\" | \"post\" | \"dialog\";\n                                        formnovalidate?: \"formnovalidate\";\n                                        formtarget: targetValues;\n                                      }\n                                    : inputType extends \"tel\"\n                                      ? {\n                                          type: \"tel\";\n                                          list?: string;\n                                          readonly?: \"readonly\";\n                                          size?: string;\n                                          pattern?: string;\n                                        } & Partial<LengthAble>\n                                      : inputType extends \"text\"\n                                        ? {\n                                            type: \"text\";\n                                            list?: string;\n                                            pattern?: string;\n                                            readonly?: \"readonly\";\n                                            placeholder?: string;\n                                          } & Partial<LengthAble>\n                                        : inputType extends \"time\"\n                                          ? {\n                                              type: \"time\";\n                                              list?: string;\n                                              readonly: \"readonly\";\n                                            } & Partial<SteppableAttr>\n                                          : inputType extends \"url\"\n                                            ? {\n                                                type: \"url\";\n                                                list?: string;\n                                                pattern: string;\n                                                placeholder: string;\n                                                readonly?: \"readonly\";\n                                              } & Partial<LengthAble>\n                                            : inputType extends \"week\"\n                                              ? {\n                                                  type: \"week\";\n                                                  readonly?: \"readonly\";\n                                                } & Partial<SteppableAttr>\n                                              : {\n                                                  type: \"Error something went wrong ????\";\n                                                });\n\nexport const Input = (attrs: InputAttr<inputType>) => createS(\"input\", attrs);\n\ntype LabelAttr = GlobalAttr & { for: string };\n\nexport const Label = (attrs: LabelAttr, ...children: (HTMLElement | Text)[]) =>\n  createE(\"label\", attrs, children);\n","/* Elements that should be inside the head */\n\nimport type { targetValues } from \"./attr\";\nimport { createS } from \"./elem\";\n\ntype BaseAttrOpt = {\n  href: string;\n  target: targetValues;\n};\n\ntype BaseAttr = Partial<BaseAttrOpt> &\n  (Pick<BaseAttrOpt, \"href\"> | Pick<BaseAttrOpt, \"target\">);\n/**\n * Must be inside <head>\n * If used there should only be 1 inside the document\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base\n * The <base> HTML element specifies the base URL to use for all relative URLs in a document. There can be only one <base> element in a document.\n *\n *A document's used base URL can be accessed by scripts with Node.baseURI. If the document has no <base> elements, then baseURI defaults to location.href.\n */\nfunction Base(attr: BaseAttr) {\n  const b = document.createElement(\"base\");\n  if (attr.href) b.setAttribute(\"href\", attr.href);\n  if (attr.target) b.setAttribute(\"target\", attr.target);\n  return b;\n}\n/**\n * Sets or updates the meta description in the head\n */\nexport function MetaDescription(description: string) {\n  const current = document.head.querySelector('meta[name=\"description\"]');\n  if (current) {\n    current.setAttribute(\"content\", description);\n  } else {\n    document.head.appendChild(\n      createS(\"meta\", { name: \"description\", content: description })\n    );\n  }\n}\n\n/**\n * Sets or updates the document title (this is a void function use it above the return in your render)\n */\nexport function Title(title: string) {\n  document.title = title;\n}\n","import type { GlobalAttr } from \"./attr\";\nimport { createE } from \"./elem\";\n\n/** <caption> <thead> <tbody> <tfooter>\n * also accepts <tr> directly\n * But it seems like using a <tbody> is preffered by the new standards\n */\ntype tableChild =\n  | HTMLTableSectionElement\n  | HTMLTableCaptionElement\n  | HTMLTableRowElement;\n\nexport const Table = (attributes: GlobalAttr, ...children: tableChild[]) =>\n  createE(\"table\", attributes, children);\n\nexport const TableHead = (\n  attributes: GlobalAttr,\n  ...children: HTMLTableRowElement[]\n) => createE(\"thead\", attributes, children);\n\nexport const Thead = TableHead;\n\nexport const TableBody = (\n  attributes: GlobalAttr,\n  ...children: HTMLTableRowElement[]\n) => createE(\"tbody\", attributes, children);\n\nexport const Tbody = TableBody;\n\nexport const TableFoot = (\n  attributes: GlobalAttr,\n  ...children: HTMLTableRowElement[]\n) => createE(\"tfoot\", attributes, children);\n\nexport const Tfoot = TableFoot;\n\n/** Only <td> and <th> */\ntype tableRowChild = HTMLTableCellElement;\n\nexport const TableRow = (\n  attributes: GlobalAttr,\n  ...children: tableRowChild[]\n) => createE(\"tr\", attributes, children);\n\nexport const Tr = TableRow;\n\nexport const TableData = (\n  attributes: GlobalAttr,\n  ...children: (HTMLElement | Text)[]\n) => createE(\"td\", attributes, children);\n\nexport const Td = TableData;\n\n/** https://developer.mozilla.org/en-US/docs/Web/HTML/Element/th#attributes */\ntype tableHeaderAttributes = GlobalAttr & {\n  scope?: \"row\" | \"col\" | \"rowgroup\" | \"colgroup\";\n  abbr?: string;\n  colspan?: string;\n  headers?: string;\n  rowspan?: string;\n};\n\nexport const TableHeader = (\n  attributes: tableHeaderAttributes,\n  ...children: (Text | HTMLElement)[]\n) => createE(\"th\", attributes, children);\n\nexport const Th = TableHeader;\n\n/* Caption for tables */\nexport const TableCaption = (\n  attributes: GlobalAttr,\n  ...children: (Text | HTMLElement)[]\n) => createE(\"caption\", attributes, children);\n","import type { GlobalAttr } from \"./attr\";\nimport { createE } from \"./elem\";\n\nexport const Address = (attributes: GlobalAttr, ...children: HTMLElement[]) =>\n  createE(\"address\", attributes, children);\n\nexport const Nav = (attributes: GlobalAttr, ...children: HTMLElement[]) =>\n  createE(\"nav\", attributes, children);\n\n/** https://developer.mozilla.org/en-US/docs/Web/HTML/Element/article */\nexport const Article = (attributes: GlobalAttr, ...children: HTMLElement[]) =>\n  createE(\"article\", attributes, children);\n\n/** https://developer.mozilla.org/en-US/docs/Web/HTML/Element/aside */\nexport const Aside = (attributes: GlobalAttr, ...children: HTMLElement[]) =>\n  createE(\"aside\", attributes, children);\n\nexport const Main = (attributes: GlobalAttr, ...children: HTMLElement[]) =>\n  createE(\"main\", attributes, children);\n\nexport const Button = (attributes: GlobalAttr, ...children: HTMLElement[]) =>\n  createE(\"button\", attributes, children);\n\nexport const Footer = (attributes: GlobalAttr, ...children: HTMLElement[]) =>\n  createE(\"footer\", attributes, children);\n","/* TODO Strip all the unneccesary stuff out. And transform it into typescript\n *\n ******************FORKED FROM https://github.com/bigskysoftware/idiomorph *******************************************\n * BSD 2-Clause License\n *\n * Copyright (c) 2022, Big Sky Software\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n */\n\nconst EMPTY_SET: Set<string> = new Set();\n\n// default configuration values, updatable by users now\nconst defaults = {\n  morphStyle: \"outerHTML\" as \"innerHTML\" | \"outerHTML\",\n  deadIds: new Set<string>(),\n  head: {\n    block: false as boolean,\n    ignore: false as boolean,\n    style: \"morph\" as \"morph\" | \"append\",\n    shouldPreserve: (elt: Element) => {\n      return elt.getAttribute(\"im-preserve\") === \"true\";\n    },\n    shouldReAppend: (elt: Element) => {\n      return elt.getAttribute(\"im-re-append\") === \"true\";\n    },\n  },\n} as const;\n\ntype contextType = typeof defaults & {\n  newContent: MorphEl;\n  ignoreActive: boolean;\n  ignoreActiveValue: boolean;\n  target: MorphEl | null;\n  config: contextType;\n  idMap: Map<MorphEl, Set<string>>;\n};\n\ntype MorphNode = Node & { generatedByIdiomorph?: boolean };\ntype MorphEl = Element & { generatedByIdiomorph?: boolean };\n\n//=============================================================================\n// Core Morphing Algorithm - morph, morphNormalizedContent, morphOldNodeTo, morphChildren\n//=============================================================================\nexport function morph(\n  oldNode: MorphNode | MorphEl,\n  newContent: MorphNode | MorphEl | string | null,\n  config: Partial<contextType> = {},\n) {\n  if (oldNode instanceof Document) {\n    oldNode = oldNode.documentElement;\n  }\n\n  if (typeof newContent === \"string\") {\n    newContent = parseContent(newContent) as MorphEl;\n  }\n\n  const normalizedContent = normalizeContent(newContent);\n\n  const ctx = createMorphContext(\n    oldNode as MorphEl,\n    normalizedContent as MorphEl,\n    config as contextType,\n  );\n\n  return morphNormalizedContent(\n    oldNode as any,\n    normalizedContent as MorphEl,\n    ctx,\n  );\n}\n\nfunction morphNormalizedContent(\n  oldNode: MorphEl,\n  normalizedNewContent: MorphEl,\n  ctx: contextType,\n) {\n  if (ctx.head.block) {\n    const oldHead = oldNode.querySelector(\"head\");\n    const newHead = normalizedNewContent.querySelector(\"head\");\n    if (oldHead && newHead) {\n      const promises = handleHeadElement(newHead, oldHead, ctx);\n      // when head promises resolve, call morph again, ignoring the head tag\n      Promise.all(promises).then(function () {\n        morphNormalizedContent(\n          oldNode,\n          normalizedNewContent,\n          Object.assign(ctx, {\n            head: {\n              block: false,\n              ignore: true,\n            },\n          }),\n        );\n      });\n      return;\n    }\n  }\n\n  if (ctx.morphStyle === \"innerHTML\") {\n    // innerHTML, so we are only updating the children\n    morphChildren(normalizedNewContent, oldNode, ctx);\n    return oldNode.children;\n  } else {\n    // otherwise find the best element match in the new content, morph that, and merge its siblings\n    // into either side of the best match\n    const bestMatch = findBestNodeMatch(normalizedNewContent, oldNode, ctx);\n\n    // stash the siblings that will need to be inserted on either side of the best match\n    const previousSibling = bestMatch?.previousSibling;\n    const nextSibling = bestMatch?.nextSibling;\n\n    // morph it\n    const morphedNode = morphOldNodeTo(oldNode, bestMatch as MorphEl, ctx);\n\n    if (bestMatch) {\n      // if there was a best match, merge the siblings in too and return the\n      // whole bunch\n      return insertSiblings(\n        previousSibling as MorphEl,\n        morphedNode as MorphEl,\n        nextSibling as MorphEl,\n      );\n    } else {\n      // otherwise nothing was added to the DOM\n      return [];\n    }\n  }\n}\n\nfunction ignoreValueOfActiveElement(\n  possibleActiveElement: MorphEl,\n  ctx: contextType,\n) {\n  return (\n    ctx.ignoreActiveValue &&\n    possibleActiveElement === document.activeElement &&\n    possibleActiveElement !== document.body\n  );\n}\n\nfunction morphOldNodeTo(\n  oldNode: MorphEl,\n  newContent: MorphEl,\n  ctx: contextType,\n) {\n  if (ctx.ignoreActive && oldNode === document.activeElement) {\n    // don't morph focused element\n  } else if (newContent == null) {\n    oldNode.remove();\n\n    return null;\n  } else if (!isSoftMatch(oldNode, newContent)) {\n    oldNode.parentElement!.replaceChild(newContent, oldNode);\n\n    return newContent;\n  } else {\n    if (oldNode instanceof HTMLHeadElement && ctx.head.ignore) {\n      // ignore the head element\n    } else if (\n      oldNode instanceof HTMLHeadElement &&\n      ctx.head.style !== \"morph\"\n    ) {\n      handleHeadElement(newContent, oldNode, ctx);\n    } else {\n      syncNodeFrom(newContent, oldNode, ctx);\n      if (!ignoreValueOfActiveElement(oldNode, ctx)) {\n        morphChildren(newContent, oldNode, ctx);\n      }\n    }\n    return oldNode;\n  }\n}\n\n/**\n * This is the core algorithm for matching up children.  The idea is to use id sets to try to match up\n * nodes as faithfully as possible.  We greedily match, which allows us to keep the algorithm fast, but\n * by using id sets, we are able to better match up with content deeper in the DOM.\n *\n * Basic algorithm is, for each node in the new content:\n *\n * - if we have reached the end of the old parent, append the new content\n * - if the new content has an id set match with the current insertion point, morph\n * - search for an id set match\n * - if id set match found, morph\n * - otherwise search for a \"soft\" match\n * - if a soft match is found, morph\n * - otherwise, prepend the new node before the current insertion point\n *\n * The two search algorithms terminate if competing node matches appear to outweigh what can be achieved\n * with the current node.  See findIdSetMatch() and findSoftMatch() for details.\n *\n */\nfunction morphChildren(\n  newParent: MorphEl,\n  oldParent: MorphEl,\n  ctx: contextType,\n) {\n  let nextNewChild = newParent.firstChild;\n  let insertionPoint = oldParent.firstChild;\n  let newChild;\n\n  // run through all the new content\n  while (nextNewChild) {\n    newChild = nextNewChild;\n    nextNewChild = newChild.nextSibling;\n\n    // if we are at the end of the exiting parent's children, just append\n    if (insertionPoint == null) {\n      oldParent.appendChild(newChild);\n      removeIdsFromConsideration(ctx, newChild as MorphEl);\n      continue;\n    }\n\n    // if the current node has an id set match then morph\n    if (isIdSetMatch(newChild as MorphEl, insertionPoint as MorphEl, ctx)) {\n      morphOldNodeTo(insertionPoint as MorphEl, newChild as MorphEl, ctx);\n      insertionPoint = insertionPoint.nextSibling;\n      removeIdsFromConsideration(ctx, newChild as MorphEl);\n      continue;\n    }\n\n    // otherwise search forward in the existing old children for an id set match\n    let idSetMatch = findIdSetMatch(\n      newParent,\n      oldParent,\n      newChild as MorphEl,\n      insertionPoint as MorphEl,\n      ctx,\n    );\n\n    // if we found a potential match, remove the nodes until that point and morph\n    if (idSetMatch) {\n      insertionPoint = removeNodesBetween(insertionPoint, idSetMatch, ctx);\n      morphOldNodeTo(idSetMatch, newChild as MorphEl, ctx);\n      removeIdsFromConsideration(ctx, newChild as MorphEl);\n      continue;\n    }\n\n    // no id set match found, so scan forward for a soft match for the current node\n    let softMatch = findSoftMatch(\n      newParent,\n      newChild as MorphEl,\n      insertionPoint as MorphEl,\n      ctx,\n    );\n\n    // if we found a soft match for the current node, morph\n    if (softMatch) {\n      insertionPoint = removeNodesBetween(insertionPoint, softMatch, ctx);\n      morphOldNodeTo(softMatch, newChild as MorphEl, ctx);\n      removeIdsFromConsideration(ctx, newChild as MorphEl);\n      continue;\n    }\n\n    // abandon all hope of morphing, just insert the new child before the insertion point\n    // and move on\n\n    oldParent.insertBefore(newChild, insertionPoint);\n    removeIdsFromConsideration(ctx, newChild as MorphEl);\n  }\n\n  // remove any remaining old nodes that didn't match up with new content\n  while (insertionPoint !== null) {\n    let tempNode = insertionPoint;\n    insertionPoint = insertionPoint.nextSibling;\n    removeNode(tempNode as MorphEl, ctx);\n  }\n}\n\n//=============================================================================\n// Attribute Syncing Code\n//=============================================================================\n\nfunction ignoreAttribute(\n  attr: string,\n  to: MorphEl,\n  updateType: \"update\" | \"remove\",\n  ctx: contextType,\n) {\n  if (\n    attr === \"value\" &&\n    ctx.ignoreActiveValue &&\n    to === document.activeElement\n  ) {\n    return true;\n  }\n  return false;\n}\n\nfunction syncNodeFrom(from: MorphEl, to: MorphEl, ctx: contextType) {\n  const type = from.nodeType;\n\n  // if is an element type, sync the attributes from the\n  // new node into the new node\n  if (type === 1 /* element type */) {\n    const fromAttributes = from.attributes;\n    const toAttributes = to.attributes;\n    for (const fromAttribute of fromAttributes) {\n      if (ignoreAttribute(fromAttribute.name, to, \"update\", ctx)) {\n        continue;\n      }\n      if (to.getAttribute(fromAttribute.name) !== fromAttribute.value) {\n        to.setAttribute(fromAttribute.name, fromAttribute.value);\n      }\n    }\n    // iterate backwards to avoid skipping over items when a delete occurs\n    for (let i = toAttributes.length - 1; 0 <= i; i--) {\n      const toAttribute = toAttributes[i]!;\n      if (ignoreAttribute(toAttribute.name, to, \"remove\", ctx)) {\n        continue;\n      }\n      if (!from.hasAttribute(toAttribute.name)) {\n        to.removeAttribute(toAttribute.name);\n      }\n    }\n  }\n\n  // sync text nodes\n  if (type === 8 /* comment */ || type === 3 /* text */) {\n    if (to.nodeValue !== from.nodeValue) {\n      to.nodeValue = from.nodeValue;\n    }\n  }\n\n  if (!ignoreValueOfActiveElement(to, ctx)) {\n    // sync input values\n    syncInputValue(from, to, ctx);\n  }\n}\n\nfunction syncBooleanAttribute(\n  from: MorphEl,\n  to: MorphEl,\n  attributeName: string,\n  ctx: contextType,\n) {\n  if ((from as any)[attributeName] !== (to as any)[attributeName]) {\n    const ignoreUpdate = ignoreAttribute(attributeName, to, \"update\", ctx);\n    if (!ignoreUpdate) {\n      (to as any) = (from as any)[attributeName];\n    }\n    if ((from as any)[attributeName]) {\n      if (!ignoreUpdate) {\n        to.setAttribute(attributeName, (from as any)[attributeName]);\n      }\n    } else {\n      if (!ignoreAttribute(attributeName, to, \"remove\", ctx)) {\n        to.removeAttribute(attributeName);\n      }\n    }\n  }\n}\n\nfunction syncInputValue(from: MorphEl, to: MorphEl, ctx: contextType) {\n  if (\n    from instanceof HTMLInputElement &&\n    to instanceof HTMLInputElement &&\n    from.type !== \"file\"\n  ) {\n    const fromValue = from.value;\n    const toValue = to.value;\n\n    // sync boolean attributes\n    syncBooleanAttribute(from, to, \"checked\", ctx);\n    syncBooleanAttribute(from, to, \"disabled\", ctx);\n\n    if (!from.hasAttribute(\"value\")) {\n      if (!ignoreAttribute(\"value\", to, \"remove\", ctx)) {\n        to.value = \"\";\n        to.removeAttribute(\"value\");\n      }\n    } else if (fromValue !== toValue) {\n      if (!ignoreAttribute(\"value\", to, \"update\", ctx)) {\n        to.setAttribute(\"value\", fromValue);\n        to.value = fromValue;\n      }\n    }\n  } else if (from instanceof HTMLOptionElement) {\n    syncBooleanAttribute(from, to, \"selected\", ctx);\n  } else if (\n    from instanceof HTMLTextAreaElement &&\n    to instanceof HTMLTextAreaElement\n  ) {\n    const fromValue = from.value;\n    const toValue = to.value;\n    if (ignoreAttribute(\"value\", to, \"update\", ctx)) {\n      return;\n    }\n    if (fromValue !== toValue) {\n      to.value = fromValue;\n    }\n    if (to.firstChild && to.firstChild.nodeValue !== fromValue) {\n      to.firstChild.nodeValue = fromValue;\n    }\n  }\n}\n\n//=============================================================================\n// the HEAD tag can be handled specially, either w/ a 'merge' or 'append' style\n//=============================================================================\nfunction handleHeadElement(\n  newHeadTag: MorphEl,\n  currentHead: MorphEl,\n  ctx: contextType,\n) {\n  const removed = [];\n  const preserved = [];\n  const nodesToAppend = [];\n\n  const headMergeStyle = ctx.head.style;\n\n  // put all new head elements into a Map, by their outerHTML\n  const srcToNewHeadNodes = new Map();\n  for (const newHeadChild of newHeadTag.children) {\n    srcToNewHeadNodes.set(newHeadChild.outerHTML, newHeadChild);\n  }\n\n  // for each elt in the current head\n  for (const currentHeadElt of currentHead.children) {\n    // If the current head element is in the map\n    const inNewContent = srcToNewHeadNodes.has(currentHeadElt.outerHTML);\n    const isReAppended = ctx.head.shouldReAppend(currentHeadElt);\n    const isPreserved = ctx.head.shouldPreserve(currentHeadElt);\n    if (inNewContent || isPreserved) {\n      if (isReAppended) {\n        // remove the current version and let the new version replace it and re-execute\n        removed.push(currentHeadElt);\n      } else {\n        // this element already exists and should not be re-appended, so remove it from\n        // the new content map, preserving it in the DOM\n        srcToNewHeadNodes.delete(currentHeadElt.outerHTML);\n        preserved.push(currentHeadElt);\n      }\n    } else {\n      if (headMergeStyle === \"append\") {\n        // we are appending and this existing element is not new content\n        // so if and only if it is marked for re-append do we do anything\n        if (isReAppended) {\n          removed.push(currentHeadElt);\n          nodesToAppend.push(currentHeadElt);\n        }\n      } else {\n        // if this is a merge, we remove this content since it is not in the new head\n\n        removed.push(currentHeadElt);\n      }\n    }\n  }\n\n  // Push the remaining new head elements in the Map into the\n  // nodes to append to the head tag\n  nodesToAppend.push(...srcToNewHeadNodes.values());\n\n  for (const newNode of nodesToAppend) {\n    const newElt = document\n      .createRange()\n      .createContextualFragment(newNode.outerHTML).firstChild;\n  }\n\n  return [];\n}\n\n//=============================================================================\n// Misc\n//=============================================================================\n\n/*\n      Deep merges the config object and the Idiomoroph.defaults object to\n      produce a final configuration object\n     */\nfunction mergeDefaults(config: Partial<contextType>) {\n  const finalConfig: Partial<contextType> = {};\n  // copy top level stuff into final config\n  Object.assign(finalConfig, defaults);\n  Object.assign(finalConfig, config);\n\n  // copy head config into final config  (do this to deep merge the head)\n  (finalConfig as any).head = {};\n  Object.assign(finalConfig.head as any, defaults.head);\n  Object.assign(finalConfig.head as any, config.head);\n  return finalConfig;\n}\n\nfunction createMorphContext(\n  oldNode: MorphEl,\n  newContent: MorphEl,\n  config: contextType,\n): contextType {\n  config = mergeDefaults(config) as any;\n  return {\n    target: oldNode,\n    newContent: newContent,\n    config: config,\n    morphStyle: config.morphStyle,\n    ignoreActive: config.ignoreActive,\n    ignoreActiveValue: config.ignoreActiveValue,\n    idMap: createIdMap(oldNode, newContent),\n    deadIds: new Set(),\n    head: config.head,\n  };\n}\n\nfunction isIdSetMatch(\n  node1: null | MorphEl,\n  node2: MorphEl | null,\n  ctx: contextType,\n) {\n  if (node1 == null || node2 == null) {\n    return false;\n  }\n  if (node1.nodeType === node2.nodeType && node1.tagName === node2.tagName) {\n    if (node1.id !== \"\" && node1.id === node2.id) {\n      return true;\n    } else {\n      return getIdIntersectionCount(ctx, node1, node2) > 0;\n    }\n  }\n  return false;\n}\n\nfunction isSoftMatch(node1: MorphEl | null, node2: MorphEl | null) {\n  if (node1 == null || node2 == null) {\n    return false;\n  }\n  return node1.nodeType === node2.nodeType && node1.tagName === node2.tagName;\n}\n\nfunction removeNodesBetween(\n  startInclusive: MorphNode | null,\n  endExclusive: MorphNode | null,\n  ctx: contextType,\n) {\n  while (startInclusive !== endExclusive) {\n    const tempNode = startInclusive;\n    startInclusive = startInclusive!.nextSibling!;\n    removeNode(tempNode as MorphEl, ctx);\n  }\n  removeIdsFromConsideration(ctx, endExclusive as MorphEl);\n  return endExclusive!.nextSibling!;\n}\n\n//=============================================================================\n// Scans forward from the insertionPoint in the old parent looking for a potential id match\n// for the newChild.  We stop if we find a potential id match for the new child OR\n// if the number of potential id matches we are discarding is greater than the\n// potential id matches for the new child\n//=============================================================================\nfunction findIdSetMatch(\n  newContent: MorphNode,\n  oldParent: MorphNode,\n  newChild: MorphEl,\n  insertionPoint: MorphEl | null,\n  ctx: contextType,\n) {\n  // max id matches we are willing to discard in our search\n  const newChildPotentialIdCount = getIdIntersectionCount(\n    ctx,\n    newChild,\n    oldParent as MorphEl,\n  );\n\n  const potentialMatch = null;\n\n  // only search forward if there is a possibility of an id match\n  if (newChildPotentialIdCount > 0) {\n    let potentialMatch = insertionPoint;\n    // if there is a possibility of an id match, scan forward\n    // keep track of the potential id match count we are discarding (the\n    // newChildPotentialIdCount must be greater than this to make it likely\n    // worth it)\n    let otherMatchCount = 0;\n    while (potentialMatch != null) {\n      // If we have an id match, return the current potential match\n      if (isIdSetMatch(newChild, potentialMatch, ctx)) {\n        return potentialMatch;\n      }\n\n      // computer the other potential matches of this new content\n      otherMatchCount += getIdIntersectionCount(\n        ctx,\n        potentialMatch,\n        newContent as MorphEl,\n      );\n      if (otherMatchCount > newChildPotentialIdCount) {\n        // if we have more potential id matches in _other_ content, we\n        // do not have a good candidate for an id match, so return null\n        return null;\n      }\n\n      // advanced to the next old content child\n      potentialMatch = potentialMatch.nextSibling as MorphEl;\n    }\n  }\n  return potentialMatch;\n}\n\n//=============================================================================\n// Scans forward from the insertionPoint in the old parent looking for a potential soft match\n// for the newChild.  We stop if we find a potential soft match for the new child OR\n// if we find a potential id match in the old parents children OR if we find two\n// potential soft matches for the next two pieces of new content\n//=============================================================================\nfunction findSoftMatch(\n  newContent: MorphNode,\n  newChild: MorphEl,\n  insertionPoint: MorphEl | null,\n  ctx: contextType,\n) {\n  let potentialSoftMatch = insertionPoint;\n  let nextSibling = newChild.nextSibling;\n  let siblingSoftMatchCount = 0;\n\n  while (potentialSoftMatch != null) {\n    if (\n      getIdIntersectionCount(ctx, potentialSoftMatch, newContent as MorphEl) > 0\n    ) {\n      // the current potential soft match has a potential id set match with the remaining new\n      // content so bail out of looking\n      return null;\n    }\n\n    // if we have a soft match with the current node, return it\n    if (isSoftMatch(newChild, potentialSoftMatch)) {\n      return potentialSoftMatch;\n    }\n\n    if (isSoftMatch(nextSibling as MorphEl, potentialSoftMatch)) {\n      // the next new node has a soft match with this node, so\n      // increment the count of future soft matches\n      siblingSoftMatchCount++;\n      nextSibling = nextSibling!.nextSibling;\n\n      // If there are two future soft matches, bail to allow the siblings to soft match\n      // so that we don't consume future soft matches for the sake of the current node\n      if (siblingSoftMatchCount >= 2) {\n        return null;\n      }\n    }\n\n    // advanced to the next old content child\n    potentialSoftMatch = potentialSoftMatch.nextSibling as null | MorphEl;\n  }\n\n  return potentialSoftMatch;\n}\n\nfunction parseContent(newContent: string) {\n  const parser = new DOMParser();\n\n  // remove svgs to avoid false-positive matches on head, etc.\n  const contentWithSvgsRemoved = newContent.replace(\n    /<svg(\\s[^>]*>|>)([\\s\\S]*?)<\\/svg>/gim,\n    \"\",\n  );\n\n  // if the newContent contains a html, head or body tag, we can simply parse it w/o wrapping\n  if (\n    contentWithSvgsRemoved.match(/<\\/html>/) ||\n    contentWithSvgsRemoved.match(/<\\/head>/) ||\n    contentWithSvgsRemoved.match(/<\\/body>/)\n  ) {\n    const content = parser.parseFromString(newContent, \"text/html\");\n    // if it is a full HTML document, return the document itself as the parent container\n    if (contentWithSvgsRemoved.match(/<\\/html>/)) {\n      (content as MorphNode).generatedByIdiomorph = true;\n      return content;\n    } else {\n      // otherwise return the html element as the parent container\n      const htmlElement: MorphNode | null = content.firstChild;\n      if (htmlElement) {\n        htmlElement.generatedByIdiomorph = true;\n        return htmlElement;\n      } else {\n        return null;\n      }\n    }\n  } else {\n    // if it is partial HTML, wrap it in a template tag to provide a parent element and also to help\n    // deal with touchy tags like tr, tbody, etc.\n    const responseDoc = parser.parseFromString(\n      \"<body><template>\" + newContent + \"</template></body>\",\n      \"text/html\",\n    );\n    const content = responseDoc.body.querySelector(\"template\")!.content;\n    (content as MorphNode).generatedByIdiomorph = true;\n    return content;\n  }\n}\n\nfunction normalizeContent(newContent: null | MorphEl | MorphNode) {\n  if (newContent == null) {\n    // noinspection UnnecessaryLocalVariableJS\n    const dummyParent = document.createElement(\"div\");\n    return dummyParent;\n  } else if (newContent.generatedByIdiomorph) {\n    // the template tag created by idiomorph parsing can serve as a dummy parent\n    return newContent;\n  } else if (newContent instanceof Node) {\n    // a single node is added as a child to a dummy parent\n    const dummyParent = document.createElement(\"div\");\n    dummyParent.append(newContent);\n    return dummyParent;\n  } else {\n    // all nodes in the array or HTMLElement collection are consolidated under\n    // a single dummy parent element\n    const dummyParent = document.createElement(\"div\");\n    for (const elt of [...newContent]) {\n      dummyParent.append(elt);\n    }\n    return dummyParent;\n  }\n}\n\nfunction insertSiblings(\n  previousSibling: MorphEl | null,\n  morphedNode: MorphEl,\n  nextSibling: MorphEl | null,\n) {\n  const stack: MorphEl[] = [];\n  const added = [];\n  while (previousSibling != null) {\n    stack.push(previousSibling);\n    previousSibling = previousSibling.previousSibling as MorphEl | null;\n  }\n  while (stack.length > 0) {\n    const node = stack.pop();\n    added.push(node); // push added preceding siblings on in order and insert\n    morphedNode.parentElement!.insertBefore(node as MorphEl, morphedNode);\n  }\n  added.push(morphedNode);\n  while (nextSibling != null) {\n    stack.push(nextSibling);\n    added.push(nextSibling); // here we are going in order, so push on as we scan, rather than add\n    nextSibling = nextSibling.nextSibling as MorphEl;\n  }\n  while (stack.length > 0) {\n    morphedNode.parentElement!.insertBefore(\n      stack.pop() as MorphEl,\n      morphedNode.nextSibling,\n    );\n  }\n  return added;\n}\n\nfunction findBestNodeMatch(\n  newContent: MorphEl,\n  oldNode: MorphEl,\n  ctx: contextType,\n) {\n  let currentElement;\n  currentElement = newContent.firstChild;\n  let bestElement = currentElement;\n  let score = 0;\n  while (currentElement) {\n    const newScore = scoreElement(currentElement as MorphEl, oldNode, ctx);\n    if (newScore > score) {\n      bestElement = currentElement;\n      score = newScore;\n    }\n    currentElement = currentElement.nextSibling;\n  }\n  return bestElement;\n}\n\nfunction scoreElement(node1: MorphEl, node2: MorphEl, ctx: contextType) {\n  if (isSoftMatch(node1, node2)) {\n    return 0.5 + getIdIntersectionCount(ctx, node1, node2);\n  }\n  return 0;\n}\n\nfunction removeNode(tempNode: MorphEl, ctx: contextType) {\n  removeIdsFromConsideration(ctx, tempNode);\n\n  tempNode.remove();\n}\n\n//=============================================================================\n// ID Set Functions\n//=============================================================================\n\nfunction isIdInConsideration(ctx: contextType, id: string) {\n  return !ctx.deadIds.has(id);\n}\n\nfunction idIsWithinNode(ctx: contextType, id: string, targetNode: MorphEl) {\n  const idSet = ctx.idMap.get(targetNode) || EMPTY_SET;\n  return idSet.has(id);\n}\n\nfunction removeIdsFromConsideration(ctx: contextType, node: MorphEl) {\n  const idSet = ctx.idMap.get(node) || EMPTY_SET;\n  for (const id of idSet) {\n    // @ts-ignore\n    ctx.deadIds.add(id);\n  }\n}\n\nfunction getIdIntersectionCount(\n  ctx: contextType,\n  node1: MorphEl,\n  node2: MorphEl,\n) {\n  const sourceSet = ctx.idMap.get(node1) || EMPTY_SET;\n  let matchCount = 0;\n  for (const id of sourceSet) {\n    // a potential match is an id in the source and potentialIdsSet, but\n    // that has not already been merged into the DOM\n    if (isIdInConsideration(ctx, id) && idIsWithinNode(ctx, id, node2)) {\n      ++matchCount;\n    }\n  }\n  return matchCount;\n}\n\nfunction populateIdMapForNode(node: MorphEl, idMap: Map<Node, Set<string>>) {\n  const nodeParent = node.parentElement;\n  // find all elements with an id property\n  const idElements = node.querySelectorAll(\"[id]\");\n  for (const elt of idElements) {\n    let current = elt;\n    // walk up the parent hierarchy of that element, adding the id\n    // of element to the parent's id set\n    while (current !== nodeParent && current != null) {\n      let idSet = idMap.get(current);\n      // if the id set doesn't exist, create it and insert it in the  map\n      if (idSet == null) {\n        idSet = new Set();\n        idMap.set(current, idSet);\n      }\n      idSet.add(elt.id);\n      current = current.parentElement!;\n    }\n  }\n}\n\nfunction createIdMap(oldContent: MorphEl, newContent: MorphEl) {\n  const idMap: Map<MorphEl, Set<string>> = new Map();\n  populateIdMapForNode(oldContent, idMap);\n  populateIdMapForNode(newContent, idMap);\n  return idMap;\n}\n\n/// END OF MORPHING ////\n","import { morph } from \"./morphing\";\n\nexport type WhateverComponent = Comp<any>;\n\nclass Comp<K extends any> {\n  render: (data: K, comp: Comp<K>) => HTMLElement;\n  childComps: WhateverComponent[] = [];\n  protected parent: WhateverComponent;\n  protected data: K;\n  protected changed = true;\n  public getParent() {\n    return this.parent;\n  }\n\n  /**\n   * Usefull when updating before the component needs to be rendered!\n   */\n  public UpdateNoRender(data: K) {\n    this.data = data;\n    this.changed = true;\n  }\n\n  public Update(newData: K) {\n    this.data = newData;\n    this.changed = true;\n    this.Render();\n  }\n\n  /** The current dom element*/\n  public currentRender: HTMLElement;\n\n  /** Get a (shallow) copy of the array of children */\n  public getChildren() {\n    return [...this.childComps];\n  }\n\n  /** Returns the child */\n  public addChild(c: WhateverComponent) {\n    //@ts-ignore\n    if (c == this) {\n      throw Error(\"Can't add yourself as a child!?\");\n    }\n    this.childComps.push(c);\n  }\n  public removeChild(c: WhateverComponent) {\n    this.childComps = this.childComps.filter((ch) => c != ch);\n  }\n\n  public Render(force = false) {\n    if (!(this.changed || force)) {\n      return this.currentRender;\n    }\n    const newR = this.render(this.data, this);\n    for (const c of this.childComps) {\n      c.Render(force);\n    }\n\n    morph(this.currentRender, newR, {});\n\n    this.changed = false;\n    return this.currentRender;\n  }\n\n  constructor(\n    parent: WhateverComponent,\n    data: K,\n    render: (data: K, comp: Comp<K>) => HTMLElement,\n  ) {\n    this.render = render;\n    this.data = data;\n    this.parent = parent;\n    this.currentRender = this.render(data, this);\n  }\n}\n\nlet rc: undefined | RootComp = undefined;\nexport function RootComponent() {\n  if (rc) return rc;\n  rc = new RootComp();\n  return rc;\n}\n\nclass RootComp extends Comp<undefined> {\n  constructor() {\n    super(undefined as any, undefined, () => {\n      // hacky method that works because the Root render does nothing and is equal the the previous render\n      return document.body;\n    });\n    this.parent = this as WhateverComponent;\n  }\n}\n\n/** A component can be used to Bind a Value to a Render */\nexport function Component<K extends any>(\n  parent: WhateverComponent,\n  data: K,\n  render: (data: K, comp: Comp<K>) => HTMLElement,\n) {\n  const comp = new Comp(parent, data, render);\n\n  return comp;\n}\n\nexport type WhateverPageComponent = PageComp<any>;\n/**\n *\n * @param OnPageLoad Function is called when the route-path and matches the route this registered with in the 'pagehandler'. NOTE WHEN USING .Update ON COMPONENT IT WILL RENDER!!! (if you do so use no render)\n */\nexport class PageComp<K extends any> extends Comp<K> {\n  removeAllChildren() {\n    this.childComps = [];\n  }\n  onPageLoad: (data: K, comp: PageComp<K>) => void;\n\n  OnPageLoad() {\n    this.onPageLoad(this.data, this);\n  }\n\n  public constructor(\n    parent: WhateverComponent,\n    data: K,\n    render: (data: K, comp: Comp<K>) => HTMLElement,\n    onPageLoad: (data: K, comp: PageComp<K>) => void,\n  ) {\n    super(parent, data, render);\n    this.onPageLoad = onPageLoad;\n  }\n}\n\nexport function PageComponent<K extends any>(\n  parent: WhateverComponent,\n  data: K,\n  render: (data: K, comp: Comp<K>) => HTMLElement,\n  onPageLoad: (data: K, comp: PageComp<K>) => void,\n) {\n  return new PageComp(parent, data, render, onPageLoad);\n}\n","type eventType = keyof HTMLElementEventMap;\n\nexport function WithEventListener<T extends eventType, K extends HTMLElement>(\n  el: K,\n  eventtype: T,\n  listener: (ev: HTMLElementEventMap[T]) => void,\n): K {\n  el.addEventListener(eventtype, listener);\n  return el;\n}\n","import { type WhateverPageComponent } from \"../reactive/component\";\nimport { navigateTo } from \"./navigate\";\n\ntype routeItem = {\n  path: string;\n  route: RegExp;\n  comp: WhateverPageComponent;\n  params: paramItem[];\n};\n\ntype paramItem = {\n  pos: number;\n  name: string;\n  value?: string;\n};\n\nexport class PageRegister {\n  public Anchor: HTMLElement;\n  public routes: routeItem[];\n\n  public currentPage: WhateverPageComponent | undefined;\n  public currentRoute: routeItem | undefined;\n\n  public queryParams: URLSearchParams;\n  /**\n   * Add a route with a custom component. Those will be loaded on page load or a softnavigate with navigateTo.\n   * params can be added with [name] e.g.: '/mypage/[myparam]/info'\n   */\n  public registerRoute(route: string, comp: WhateverPageComponent) {\n    const routesplit = route.split(\"/\");\n    let resultStr = \"\";\n\n    const params: paramItem[] = [];\n\n    const splitLen = routesplit.length;\n    if (splitLen == 0 || route == \"/\") {\n      resultStr = \"/\";\n    } else {\n      for (let i = 0; i < splitLen; i++) {\n        const s = routesplit[i];\n        if (!s || s.length == 0) {\n          continue;\n        }\n        if (s[0] == \"[\" && s[s.length - 1] == \"]\") {\n          const name = s.split(\"[\")[1]!.split(\"]\")[0];\n          const nparam = {\n            name: name!,\n            pos: i,\n          } satisfies paramItem;\n          params.push(nparam);\n          resultStr += `\\/[A-Za-z1-9_\\\\-]+`;\n\n          continue;\n        }\n        resultStr += \"/\" + s;\n      }\n    }\n    const routeI = {\n      comp: comp,\n      params: params,\n      path: route,\n      route: new RegExp(resultStr),\n    } satisfies routeItem;\n    if (this.routes.find((a) => a.route == routeI.route)) {\n      throw new Error(\n        `Route already exist '${route}'.\\nRegex: '${routeI.route.source}'\\nRouteData: ${JSON.stringify(routeI)}`,\n      );\n    }\n\n    this.routes.push(routeI);\n    return this;\n  }\n\n  public getParamValue(name: string) {\n    if (this.currentRoute) {\n      for (const p of this.currentRoute.params) {\n        if (p.name == name) {\n          return p.value;\n        }\n      }\n    }\n  }\n\n  public enable() {\n    // TODO not populate the window space (with this prefix it should really matter)\n    (window as any).__$HFX__Register = this;\n    window.addEventListener(\"popstate\", onPageChange);\n    onPageChange();\n    return this;\n  }\n\n  public constructor(anchor: HTMLElement) {\n    this.Anchor = anchor;\n    this.routes = [];\n    this.queryParams = new URLSearchParams(window.location.search);\n  }\n}\n\n/**\n * Add a route with a custom component. Those will be loaded on page load or a softnavigate with navigateTo.\n * params can be added with [name] e.g.: '/mypage/[myparam]/info'\n */\nexport function RouteRegister(el: HTMLElement) {\n  return new PageRegister(el);\n}\n\nfunction onPageChange() {\n  const reg: PageRegister = (window as any).__$HFX__Register;\n\n  // reset the current values\n  reg.currentPage = undefined;\n\n  if (reg.currentRoute) {\n    reg.currentRoute.comp.removeAllChildren();\n    for (const p of reg.currentRoute.params) {\n      p.value = undefined;\n    }\n  }\n  reg.currentRoute = undefined;\n\n  reg.queryParams = new URLSearchParams(window.location.search);\n  let url = window.location.pathname;\n  // take care of trailing /\n  if (url.length > 1 && url.at(-1) == \"/\") {\n    url = url.slice(0, url.length - 1);\n  }\n  // load the current page\n  for (const r of reg.routes) {\n    const match = url.match(r.route);\n    reg.currentRoute = r;\n    if (match && match[0].length >= url.length) {\n      const splits = url.split(\"/\");\n      for (const p of r.params) {\n        p.value = splits[p.pos];\n      }\n      r.comp.OnPageLoad();\n      reg.Anchor.replaceChildren(r.comp.Render(true));\n      reg.currentPage = r.comp;\n      return;\n    }\n  }\n\n  // nothing found => 404 page\n  if (url.startsWith(\"/404\") || url.startsWith(\"404\")) {\n    return;\n  }\n  navigateTo(`/404?page=${url}`);\n}\n\n/* Get a param value from the current Route */\nexport function GetParamValue(name: string) {\n  const reg: PageRegister = (window as any).__$HFX__Register;\n  if (reg) {\n    return reg.getParamValue(name);\n  }\n  return undefined;\n}\n\n/* Get a query param (?name=value) value from the current url */\nexport function GetQueryValue(name: string) {\n  const reg: PageRegister = (window as any).__$HFX__Register;\n  if (reg) {\n    return reg.queryParams.get(name);\n  }\n  return null;\n}\n\n/* Get an array[] with all query params that match the name (?name=value&name=otherValue) from the current url*/\nexport function GetQueryValues(name: string) {\n  const reg: PageRegister = (window as any).__$HFX__Register;\n  if (reg) {\n    return reg.queryParams.getAll(name);\n  }\n  return [];\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","/**\n * Fetch JSON\n */\nexport const fetcher = {\n  post,\n  get,\n};\n\ninterface FetchResult<T, K extends boolean> {\n  succes: boolean;\n  result: K extends true ? T : undefined;\n  /**\n   * Status will be 0 if err is caused by an exception\n   *\n   */\n  err: K extends false\n    ? { status: number; name: string; cause: string | object }\n    : undefined;\n}\n\n/**\n *\n * @param url\n * @param headers\n * @param requestInit modify all the request init params. {method} will always be post. If {headers} is specified it will override the {requestInit})\n * @returns {result} is successful otherwise {{error}}\n */\nasync function get<T>(\n  url: string,\n  headers: {} | undefined | undefined,\n  requestInit: Partial<RequestInit> | null | undefined\n): Promise<FetchResult<T, boolean>> {\n  if (!requestInit) requestInit = {};\n\n  requestInit.method = \"GET\";\n\n  if (headers) {\n    requestInit.headers = headers;\n  }\n  try {\n    const fetch_result = await fetch(url, requestInit);\n\n    if (\n      fetch_result.ok &&\n      fetch_result.status >= 200 &&\n      fetch_result.status <= 299\n    ) {\n      return {\n        succes: true,\n        err: undefined,\n        result: await fetch_result.json(),\n      };\n    } else {\n      return {\n        succes: false,\n        result: undefined,\n        err: {\n          name: `Status: ${fetch_result.status} => ${fetch_result.statusText}`,\n          cause: \"Request did not succees!\",\n          status: fetch_result.status,\n        },\n      };\n    }\n  } catch (e: any) {\n    const res = {\n      err: e,\n      succes: false,\n      result: undefined,\n    };\n    res.err.status = 0;\n    return res;\n  }\n}\n\n/**\n *\n * @param url\n * @param body\n * @param headers\n * @param requestInit modify all the request init params. {method} will always be post. If {body} or {headers} is specified it will override the {requestInit})\n * @returns {result} is successful otherwise {{error}}\n */\nasync function post<T>(\n  url: string,\n  body: string | null | undefined,\n  headers: {} | undefined | undefined,\n  requestInit: Partial<RequestInit> | null | undefined\n): Promise<FetchResult<T, boolean>> {\n  if (!requestInit) requestInit = {};\n\n  requestInit.method = \"POST\";\n  if (body) {\n    requestInit.body = body;\n  }\n  if (headers) {\n    requestInit.headers = headers;\n  }\n  try {\n    const val = await fetch(url, requestInit);\n    if (val.ok && val.status >= 200 && val.status <= 299) {\n      return {\n        succes: true,\n        err: undefined,\n        result: await val.json(),\n      };\n    } else {\n      return {\n        succes: false,\n        result: undefined,\n        err: {\n          name: `Status: ${val.status} => ${val.statusText}`,\n          cause: \"Request did not succees!\",\n          status: val.status,\n        },\n      };\n    }\n  } catch (e: any) {\n    const res = {\n      err: e,\n      succes: false,\n      result: undefined,\n    };\n    res.err.status = 0;\n    return res;\n  }\n}\n","import { RenderToBody, Div, t } from \"./elem/elem\";\nimport { P, Span, A, Abbr, B, Bdi, Bdo, Cite, I } from \"./elem/text\";\nimport { H1, H2, H3, H4, H5, H6 } from \"./elem/headings\";\nimport { Hr, Br } from \"./elem/style\";\nimport { Img } from \"./elem/img\";\nimport { Input, Label } from \"./elem/input\";\n\nimport { Title, MetaDescription } from \"./elem/head\";\n\nimport {\n  Table,\n  TableBody,\n  TableData,\n  TableFoot,\n  TableHead,\n  TableHeader,\n  TableRow,\n  Tbody,\n  Td,\n  Tfoot,\n  Th,\n  Thead,\n  Tr,\n  TableCaption,\n} from \"./elem/table\";\n\nimport {\n  Article,\n  Address,\n  Aside,\n  Button,\n  Nav,\n  Main,\n  Footer,\n} from \"./elem/semantic\";\n\nimport { Component, RootComponent, PageComponent } from \"./reactive/component\";\n\nimport { WithEventListener } from \"./reactive/event\";\n\nimport { navigateTo } from \"./pages/navigate\";\n\nimport {\n  RouteRegister,\n  GetParamValue,\n  GetQueryValue,\n  GetQueryValues,\n} from \"./pages/register\";\n\nimport { fetcher } from \"./fetcher\";\n\n/* Extension methods */\n\nObject.defineProperty(HTMLElement.prototype, \"WithEvent$HFX\", {\n  value: function <T extends HTMLElement, K extends keyof HTMLElementEventMap>(\n    this: T,\n    eventtype: K,\n    listener: (ev: HTMLElementEventMap[keyof HTMLElementEventMap]) => void,\n  ) {\n    this.addEventListener(eventtype, listener);\n    return this;\n  },\n});\n\nObject.defineProperty(Object.prototype, \"With$HFX\", {\n  value: function <T extends Object>(this: T, func: (obj: T) => T) {\n    return func(this);\n  },\n});\n\ndeclare global {\n  interface HTMLElement {\n    /** Add an event listener and return the Element */\n    WithEvent$HFX<K extends keyof HTMLElementEventMap>(\n      eventtype: K,\n      listener: (ev: HTMLElementEventMap[keyof HTMLElementEventMap]) => void,\n    ): this;\n  }\n  interface Object {\n    With$HFX<T extends Object>(this: T, run: (obj: T) => this): T;\n  }\n}\n\nexport {\n  /* HTML Tags */\n  A,\n  Abbr,\n  Address,\n  Article,\n  Aside,\n  B,\n  Bdi,\n  Bdo,\n  Button,\n  Br,\n  Cite,\n  Div,\n  Footer,\n  H1,\n  H2,\n  H3,\n  H4,\n  H5,\n  H6,\n  Hr,\n  I,\n  Img,\n  Input,\n  Label,\n  Main,\n  Nav,\n  P,\n  t,\n  Span,\n\n  /* Table stuff */\n  Table,\n  TableBody,\n  TableData,\n  TableFoot,\n  TableHead,\n  TableHeader,\n  TableRow,\n  Tbody,\n  Td,\n  Tfoot,\n  Th,\n  Thead,\n  Tr,\n  TableCaption,\n\n  /* Other DOM stuff */\n  RenderToBody,\n  Title,\n  MetaDescription,\n  /* Reactive stuff */\n  WithEventListener,\n\n  /* Components */\n  Component,\n  RootComponent,\n  PageComponent,\n\n  /* Routing */\n  navigateTo,\n  RouteRegister,\n  GetParamValue,\n  GetQueryValue,\n  GetQueryValues,\n  /* fetcher */\n  fetcher,\n};\n"],"names":[],"mappings":"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","x_google_ignoreList":[14]}