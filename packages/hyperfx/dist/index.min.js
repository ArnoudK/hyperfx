"use strict";const e=e=>document.createTextNode(e),t=function(e,t){const n=document.createElement(e),r=Object.keys(t);for(const e of r)n.setAttribute(e,t[e]);return n},n=function(e,t,n){const r=document.createElement(e),o=Object.keys(t);for(const e of o)r.setAttribute(e,t[e]);if(n)for(const e of n)r.appendChild(e);return r},r=(e,t,r)=>n(e,t,r);function o(e){history.pushState({},"",e),window.dispatchEvent(new Event("popstate"))}const s=(e,t)=>n("thead",e,t),i=s,a=(e,t)=>n("tbody",e,t),u=a,c=(e,t)=>n("tfoot",e,t),l=c,d=(e,t)=>n("tr",e,t),p=d,h=(e,t)=>n("td",e,t),f=h,m=(e,t)=>n("th",e,t),g=m,x=new Set,b={morphStyle:"outerHTML",deadIds:new Set,head:{block:!1,ignore:!1,style:"morph",shouldPreserve:e=>"true"===e.getAttribute("im-preserve"),shouldReAppend:e=>"true"===e.getAttribute("im-re-append")}};function v(e,t,n={}){e instanceof Document&&(e=e.documentElement),"string"==typeof t&&(t=function(e){const t=new DOMParser,n=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(n.match(/<\/html>/)||n.match(/<\/head>/)||n.match(/<\/body>/)){const r=t.parseFromString(e,"text/html");if(n.match(/<\/html>/))return r.generatedByIdiomorph=!0,r;{const e=r.firstChild;return e?(e.generatedByIdiomorph=!0,e):null}}{const n=t.parseFromString("<body><template>"+e+"</template></body>","text/html").body.querySelector("template").content;return n.generatedByIdiomorph=!0,n}}(t));const r=function(e){if(null==e){return document.createElement("div")}if(e.generatedByIdiomorph)return e;if(e instanceof Node){const t=document.createElement("div");return t.append(e),t}{const t=document.createElement("div");for(const n of[...e])t.append(n);return t}}(t),o=function(e,t,n){return n=function(e){const t={};return Object.assign(t,b),Object.assign(t,e),t.head={},Object.assign(t.head,b.head),Object.assign(t.head,e.head),t}(n),{target:e,newContent:t,config:n,morphStyle:n.morphStyle,ignoreActive:n.ignoreActive,ignoreActiveValue:n.ignoreActiveValue,idMap:k(e,t),deadIds:new Set,head:n.head}}(e,r,n);return y(e,r,o)}function y(e,t,n){if(n.head.block){const r=e.querySelector("head"),o=t.querySelector("head");if(r&&o){const s=R(o,r,n);return void Promise.all(s).then((function(){y(e,t,Object.assign(n,{head:{block:!1,ignore:!0}}))}))}}if("innerHTML"===n.morphStyle)return A(t,e,n),e.children;{const r=function(e,t,n){let r;r=e.firstChild;let o=r,s=0;for(;r;){const e=O(r,t,n);e>s&&(o=r,s=e),r=r.nextSibling}return o}(t,e,n),o=r?.previousSibling,s=r?.nextSibling,i=w(e,r,n);return r?function(e,t,n){const r=[],o=[];for(;null!=e;)r.push(e),e=e.previousSibling;for(;r.length>0;){const e=r.pop();o.push(e),t.parentElement.insertBefore(e,t)}o.push(t);for(;null!=n;)r.push(n),o.push(n),n=n.nextSibling;for(;r.length>0;)t.parentElement.insertBefore(r.pop(),t.nextSibling);return o}(o,i,s):[]}}function T(e,t){return t.ignoreActiveValue&&e===document.activeElement&&e!==document.body}function w(e,t,n){if(!n.ignoreActive||e!==document.activeElement)return null==t?(e.remove(),null):H(e,t)?(e instanceof HTMLHeadElement&&n.head.ignore||(e instanceof HTMLHeadElement&&"morph"!==n.head.style?R(t,e,n):(!function(e,t,n){const r=e.nodeType;if(1===r){const r=e.attributes,o=t.attributes;for(const e of r)C(e.name,t,"update",n)||t.getAttribute(e.name)!==e.value&&t.setAttribute(e.name,e.value);for(let r=o.length-1;0<=r;r--){const s=o[r];C(s.name,t,"remove",n)||(e.hasAttribute(s.name)||t.removeAttribute(s.name))}}8!==r&&3!==r||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue);T(t,n)||function(e,t,n){if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&"file"!==e.type){const r=e.value,o=t.value;S(e,t,"checked",n),S(e,t,"disabled",n),e.hasAttribute("value")?r!==o&&(C("value",t,"update",n)||(t.setAttribute("value",r),t.value=r)):C("value",t,"remove",n)||(t.value="",t.removeAttribute("value"))}else if(e instanceof HTMLOptionElement)S(e,t,"selected",n);else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){const r=e.value,o=t.value;if(C("value",t,"update",n))return;r!==o&&(t.value=r),t.firstChild&&t.firstChild.nodeValue!==r&&(t.firstChild.nodeValue=r)}}(e,t,n)}(t,e,n),T(e,n)||A(t,e,n))),e):(e.parentElement.replaceChild(t,e),t)}function A(e,t,n){let r,o=e.firstChild,s=t.firstChild;for(;o;){if(r=o,o=r.nextSibling,null==s){t.appendChild(r),F(n,r);continue}if(E(r,s,n)){w(s,r,n),s=s.nextSibling,F(n,r);continue}let i=L(e,t,r,s,n);if(i){s=P(s,i,n),w(i,r,n),F(n,r);continue}let a=M(e,r,s,n);a?(s=P(s,a,n),w(a,r,n),F(n,r)):(t.insertBefore(r,s),F(n,r))}for(;null!==s;){let e=s;s=s.nextSibling,_(e,n)}}function C(e,t,n,r){return!("value"!==e||!r.ignoreActiveValue||t!==document.activeElement)}function S(e,t,n,r){if(e[n]!==t[n]){const o=C(n,t,0,r);o||(t=e[n]),e[n]?o||t.setAttribute(n,e[n]):C(n,t,0,r)||t.removeAttribute(n)}}function R(e,t,n){const r=[],o=n.head.style,s=new Map;for(const t of e.children)s.set(t.outerHTML,t);for(const e of t.children){const t=s.has(e.outerHTML),i=n.head.shouldReAppend(e),a=n.head.shouldPreserve(e);t||a?i||s.delete(e.outerHTML):"append"===o&&i&&r.push(e)}r.push(...s.values());for(const e of r)document.createRange().createContextualFragment(e.outerHTML).firstChild;return[]}function E(e,t,n){return null!=e&&null!=t&&(e.nodeType===t.nodeType&&e.tagName===t.tagName&&(""!==e.id&&e.id===t.id||V(n,e,t)>0))}function H(e,t){return null!=e&&null!=t&&(e.nodeType===t.nodeType&&e.tagName===t.tagName)}function P(e,t,n){for(;e!==t;){const t=e;e=e.nextSibling,_(t,n)}return F(n,t),t.nextSibling}function L(e,t,n,r,o){const s=V(o,n,t);if(s>0){let t=r,i=0;for(;null!=t;){if(E(n,t,o))return t;if(i+=V(o,t,e),i>s)return null;t=t.nextSibling}}return null}function M(e,t,n,r){let o=n,s=t.nextSibling,i=0;for(;null!=o;){if(V(r,o,e)>0)return null;if(H(t,o))return o;if(H(s,o)&&(i++,s=s.nextSibling,i>=2))return null;o=o.nextSibling}return o}function O(e,t,n){return H(e,t)?.5+V(n,e,t):0}function _(e,t){F(t,e),e.remove()}function j(e,t){return!e.deadIds.has(t)}function B(e,t,n){return(e.idMap.get(n)||x).has(t)}function F(e,t){const n=e.idMap.get(t)||x;for(const t of n)e.deadIds.add(t)}function V(e,t,n){const r=e.idMap.get(t)||x;let o=0;for(const t of r)j(e,t)&&B(e,t,n)&&++o;return o}function $(e,t){const n=e.parentElement,r=e.querySelectorAll("[id]");for(const e of r){let r=e;for(;r!==n&&null!=r;){let n=t.get(r);null==n&&(n=new Set,t.set(r,n)),n.add(e.id),r=r.parentElement}}}function k(e,t){const n=new Map;return $(e,n),$(t,n),n}class I{getParent(){return this.parent}UpdateNoRender(e){this.data=e,this.changed=!0}Update(e){this.data=e,this.changed=!0,this.Render(!0)}getChildren(){return[...this.childComps]}addChild(e){if(e==this)throw Error("Can't add yourself as a child!?");this.childComps.push(e)}removeChild(e){this.childComps=this.childComps.filter((t=>e!=t))}Render(e=!1){if(!this.changed&&!e)return this.currentRender;const t=this.render(this.data,this);for(const t of this.childComps)t.Render(e);return v(this.currentRender,t,{}),this.changed=!1,this.currentRender}constructor(e,t,n){this.childComps=[],this.changed=!0,this.render=n,this.data=t,this.parent=e,this.currentRender=this.render(t,this)}}let q;class N extends I{constructor(){super(void 0,void 0,(()=>document.body)),this.parent=this}}class X extends I{removeAllChildren(){this.childComps=[]}OnPageLoad(){this.onPageLoad(this.data,this)}constructor(e,t,n,r){super(e,t,n),this.onPageLoad=r}}class D{registerRoute(e,t){const n=e.split("/");let r="";const o=[],s=n.length;if(0==s||"/"==e)r="/";else for(let e=0;e<s;e++){const t=n[e];if(t&&0!=t.length)if("["!=t[0]||"]"!=t[t.length-1])r+="/"+t;else{const n={name:t.split("[")[1].split("]")[0],pos:e};o.push(n),r+="/[A-Za-z1-9_\\-]+"}}const i={comp:t,params:o,path:e,route:new RegExp(r)};if(this.routes.find((e=>e.route==i.route)))throw new Error(`Route already exist '${e}'.\nRegex: '${i.route.source}'\nRouteData: ${JSON.stringify(i)}`);return this.routes.push(i),this}getParamValue(e){if(this.currentRoute)for(const t of this.currentRoute.params)if(t.name==e)return t.value}enable(){return window.__$HFX__Register=this,window.addEventListener("popstate",G),G(),this}constructor(e){this.Anchor=e,this.routes=[],this.queryParams=new URLSearchParams(window.location.search)}}function G(){const e=window.__$HFX__Register;if(e.currentPage=void 0,e.currentRoute){e.currentRoute.comp.removeAllChildren();for(const t of e.currentRoute.params)t.value=void 0}e.currentRoute=void 0,e.queryParams=new URLSearchParams(window.location.search);let t=window.location.pathname;t.length>1&&"/"==t.at(-1)&&(t=t.slice(0,t.length-1));for(const n of e.routes){const r=t.match(n.route);if(e.currentRoute=n,r&&r[0].length>=t.length){const r=t.split("/");for(const e of n.params)e.value=r[e.pos];return n.comp.OnPageLoad(),e.Anchor.replaceChildren(n.comp.Render(!0)),void(e.currentPage=n.comp)}}t.startsWith("/404")||t.startsWith("404")||o(`/404?page=${t}`)}const U={post:async function(e,t,n,r){r||(r={});r.method="POST",t&&(r.body=t);n&&(r.headers=n);try{const t=await fetch(e,r);return t.ok&&t.status>=200&&t.status<=299?{succes:!0,err:void 0,result:await t.json()}:{succes:!1,result:void 0,err:{name:`Status: ${t.status} => ${t.statusText}`,cause:"Request did not succees!",status:t.status}}}catch(e){const t={err:e,succes:!1,result:void 0};return t.err.status=0,t}},get:async function(e,t,n){n||(n={});n.method="GET",t&&(n.headers=t);try{const t=await fetch(e,n);return t.ok&&t.status>=200&&t.status<=299?{succes:!0,err:void 0,result:await t.json()}:{succes:!1,result:void 0,err:{name:`Status: ${t.status} => ${t.statusText}`,cause:"Request did not succees!",status:t.status}}}catch(e){const t={err:e,succes:!1,result:void 0};return t.err.status=0,t}}};function W(e){const t=e.tagName,n={},r=[],o=e.childNodes,s=e.attributes;for(const e of s){const t=e.name,r=e.value;n[t]=r}for(const e of o)r.push(Q(e));return{tag:t,attrs:n,children:r}}function Q(e){return e instanceof Text?e.textContent??"":W(e)}Object.defineProperty(HTMLElement.prototype,"WithEvent$HFX",{value:function(e,t){return this.addEventListener(e,t),this}}),Object.defineProperty(Object.prototype,"With$HFX",{value:function(e){return e(this),this}}),exports.A=function(e,t){const r=n("a",e,t);return"/"==e.href[0]&&r.addEventListener("click",(e=>(o(e.target.href),e.preventDefault(),!1))),r},exports.Abbr=(e,t)=>n("abbr",e,t),exports.Address=(e,t)=>n("address",e,t),exports.Article=(e,t)=>n("article",e,t),exports.Aside=(e,t)=>n("aside",e,t),exports.B=(e,t)=>n("b",e,t),exports.Base=function(e){const t=document.createElement("base");return e.href&&t.setAttribute("href",e.href),e.target&&t.setAttribute("target",e.target),t},exports.Bdi=(e,t)=>n("bdi",e,t),exports.Bdo=(e,t)=>n("bdo",e,t),exports.BlockQuote=(e,t)=>n("blockquote",e,t),exports.Br=e=>t("br",e),exports.Button=(e,t)=>n("button",e,t),exports.Cite=(e,t)=>n("cite",e,t),exports.Code=(e,t)=>n("code",e,t),exports.Component=function(e,t,n){return new I(e,t,n)},exports.Div=(e,t)=>n("div",e,t),exports.Footer=(e,t)=>n("footer",e,t),exports.GetParamValue=function(e){const t=window.__$HFX__Register;if(t)return t.getParamValue(e)},exports.GetQueryValue=function(e){const t=window.__$HFX__Register;return t?t.queryParams.get(e):null},exports.GetQueryValues=function(e){const t=window.__$HFX__Register;return t?t.queryParams.getAll(e):[]},exports.H1=(e,t)=>r("h1",e,t),exports.H2=(e,t)=>r("h2",e,t),exports.H3=(e,t)=>r("h3",e,t),exports.H4=(e,t)=>r("h4",e,t),exports.H5=(e,t)=>r("h5",e,t),exports.H6=(e,t)=>r("h6",e,t),exports.HFXObjectToElement=function e(t){if("string"==typeof t)return document.createTextNode(t);const n=document.createElement(t.tag);for(const r of t.children)n.appendChild(e(r));const r=Object.keys(t.attrs);for(const e of r)n.setAttribute(e,t.attrs[e]);return n},exports.Hr=e=>t("hr",e),exports.I=(e,t)=>n("i",e,t),exports.Img=e=>t("img",e),exports.Input=e=>t("input",e),exports.Label=(e,t)=>n("label",e,t),exports.Main=(e,t)=>n("main",e,t),exports.MetaDescription=function(e){const n=document.head.querySelector('meta[name="description"]');n?n.setAttribute("content",e):document.head.appendChild(t("meta",{name:"description",content:e}))},exports.Nav=(e,t)=>n("nav",e,t),exports.Output=(e,t)=>n("output",e,t),exports.P=(e,t)=>n("p",e,t),exports.PageComponent=function(e,t,n,r){return new X(e,t,n,r)},exports.Pre=(e,t)=>n("pre",e,t),exports.RenderToBody=e=>document.body.appendChild(e),exports.RootComponent=function(){return q||(q=new N,q)},exports.RouteRegister=function(e){return new D(e)},exports.Span=function(t,n){const r=document.createElement("span");return((e,t)=>{const n=Object.keys(t);for(const r of n)e.setAttribute(r,t[r])})(r,t),"string"==typeof n?r.appendChild(e(n)):((e,t)=>{if(t)for(const n of t)e.appendChild(n)})(r,n),r},exports.Table=(e,t)=>n("table",e,t),exports.TableBody=a,exports.TableCaption=(e,t)=>n("caption",e,t),exports.TableData=h,exports.TableFoot=c,exports.TableHead=s,exports.TableHeader=m,exports.TableRow=d,exports.Tbody=u,exports.Td=f,exports.Tfoot=l,exports.Th=g,exports.Thead=i,exports.Title=e=>document.title=e,exports.Tr=p,exports.elementToHFXObject=W,exports.fetcher=U,exports.navigateTo=o,exports.nodeToHFXObject=Q,exports.t=e;//# sourceMappingURL=index.min.js.map
